<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mazza Tortlar</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --tg-theme-bg-color: #fff; --tg-theme-text-color: #222; --tg-theme-button-color: #3390ec; }
        body { font-family: sans-serif; background: var(--tg-theme-bg-color); color: var(--tg-theme-text-color); margin: 0; padding: 15px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .card { border: 1px solid #eee; border-radius: 12px; padding: 10px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .card img { width: 100%; border-radius: 8px; }
        .btn { background: var(--tg-theme-button-color); color: white; border: none; width: 100%; padding: 8px; border-radius: 6px; margin-top: 10px; cursor: pointer; }
        h2 { font-size: 1.2rem; }
    </style>
</head>
<body>
    <h2>Bizning Tortlar üç∞</h2>
    <div id="product-list" class="grid">
        <p>Yuklanmoqda...</p>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // Mahsulotlarni ekranga chiqarish funksiyasi
        async function loadProducts() {
            // Hozircha namuna uchun, keyinchalik bu ma'lumotlar botdan keladi
            const products = [
                { id: 1, name: "Shokoladli", price: "250,000", img: "https://picsum.photos/200" },
                { id: 2, name: "Medovik", price: "180,000", img: "https://picsum.photos/201" }
            ];

            const list = document.getElementById('product-list');
            list.innerHTML = ''; // "Yuklanmoqda"ni o'chirish

            products.forEach(p => {
                list.innerHTML += `
                    <div class="card">
                        <img src="${p.img}" alt="${p.name}">
                        <h3>${p.name}</h3>
                        <p>${p.price} so'm</p>
                        <button class="btn" onclick="order('${p.name}', ${p.id})">Qo'shish</button>
                    </div>
                `;
            });
        }

        function order(name, id) {
            tg.sendData(JSON.stringify({ product_id: id, name: name }));
        }

        loadProducts();
    </script>
</body>
</html>